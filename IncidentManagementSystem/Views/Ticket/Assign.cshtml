@model IncidentManagementSystem.Model.TicketAssignDto

<style>
    .dl-horizontal {
        margin-top:2rem;
        background-color: #fff;
        border-radius: 8px;
        padding:15px;
    }

        .dl-horizontal dt {
            text-align: right !important;
            width: auto;
            clear: left;
            float: left;
            margin-left: 12px;
            margin-right: 10px;
            font-family: Outfit;
            font-weight: 600;
            white-space: normal;
        }

        .dl-horizontal dd {
            margin-right: 20px;
            margin-left: 230px;
            margin-bottom: 20px;
        }

   /* .ticket {
        display: flex;
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
    }*/
</style>

<div class="container-fluid ">
    <div class="col-lg-12 header ">
        <div class="header-text">
        </div>
        <div class="col text">
            <span class="page input-icon">Ticket Assign</span>

            <span class="detail">Assign To </span>
        </div>
    </div>
    @using (Html.BeginForm("Assign", "Ticket", FormMethod.Post, new { role = "form" }))
    {
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12 ticket">
                <dl class="dl-horizontal">
                    <dt>
                        @Html.DisplayNameFor(model => model.Date)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.Date)
                    </dd>
                    <dt>
                        @Html.DisplayNameFor(model => model.ServiceId)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.ServiceId)
                    </dd>
                    <dt>
                        @Html.DisplayNameFor(model => model.IssueId)
                    </dt>

                    <dd>
                        @Html.DisplayFor(model => model.IssueId)
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.TicketId)
                    </dt>

                    <dd>
                        @Html.TextBoxFor(m => m.TicketId, new { @class = "form-control b-inst", @readonly = "readonly" })
                    </dd>

                    <dt>
                        @Html.DisplayNameFor(model => model.AssignTo)
                    </dt>

                    <dd>
                        @Html.DropDownListFor(m => m.AssignTo, ViewBag.UserRole as SelectList, "-Assign To -", new { @class = "form-select u-box" })
                    </dd>

                    @*<dt>

                        <input type="submit" value="Submit" class="btn btn-success btn-width" />

                    </dt>*@
                </dl>
            </div>
        </div>
        <div class="row mt-3">
            <div class="col-lg-1 col-md-2">
                <input type="submit" value="Submit" class="btn btn-success btn-width" />
            </div>
            <div class="col-lg-1 col-md-2">
                <input type="button" value="Back" class="btn btn-secondary btn-width" onclick="goBack()" />
            </div>
        </div>

    }
</div>

  
<div class="modal" tabindex="-1" role="dialog" id="modalTaskComplete" aria-labelledby="modalTaskCompleteLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content col-lg-10 col-md-9">
            <div class="modal-header text-center">
                <h4 class="modal-title" id="modalTaskCompleteLabel">Status</h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body text-center">
                <h4 class="@(@ViewBag.TaskStatus=="00"?"text-success":"text-danger")">@ViewBag.TaskMessage</h4>
            </div>
            <div class="modal-footer" style="padding:8px 8px 16px 8px;margin-top:0px">
                @if (@ViewBag.TaskStatus == "00")
                {
                    <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" data-target="#modalTaskComplete" onclick="location.href='@Url.Action("Index","Ticket")'">Okay</button>
                }
                else
                {
                    <button type="button" class="btn btn-primary btn-sm" data-dismiss="modal" data-target="#modalTaskComplete" onclick="location.href = '@Url.Action("TicketDetail","Ticket")'">Okay</button>
                }

            </div>

        </div>
    </div>
</div>

@section Scripts{
    <script>
        $(document).ready(function () {
            debugger;
            var status= '@ViewBag.TaskStatus';
            if (status !== null && status !== '')
            {
                $("#modalTaskComplete").show();
            }
        });

        function goBack() {
            window.history.back();
        }
    </script>
}



